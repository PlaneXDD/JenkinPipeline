pipeline {
    agent any

    environment {
        EMAIL_CREDS = credentials('gmail-creds')  // Replace 'gmail-creds' with the ID of your stored credentials
    }

    stages {
        stage("Build") {
            steps {
                echo "Building ..."
            }
            post {
                always {
                    mail to: "phamthienphu2604@gmail.com",
                        subject: "Build Status Email",
                        body: "Build log attached!",
                        mimeType: 'text/plain',
                        smtpHost: 'smtp.gmail.com',
                        smtpPort: '587',
                        useTls: true,
                        replyTo: 'phamthienphu2604@gmail.com',
                        authentication: "${env.EMAIL_CREDS_USR}:${env.EMAIL_CREDS_PSW}"
                }
            }
        }
        stage("Test") {
            steps {
                echo "Testing ..."
            }
        }
        stage("Deploy") {
            steps {
                echo "Deploying ..."
            }
        }
        stage("Complete") {
            steps {
                echo "Completed."
            }
        }
    }
}
